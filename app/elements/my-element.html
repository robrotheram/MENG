
<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/core-icon-button/core-icon-button.html">

<polymer-element name="sprite-canvas">
    <template>
        <style>
            .leinwand {
                width:400px;
                height:400px;
                background-color: lightblue;
            }
        </style>
        <div id="c" class="leinwand" width="200" height="200"></div>
    </template>
    <script src="../bower_components/three-js/threejs/three.min.js"></script>

    <script>
        var canvas;

        var angularSpeed = 0.2;
        var lastTime = 0;
        var renderer;
        var camera;
        var scene;
        var cube;

        // this function is executed on each animation frame
        function animate(){
            // update
            var time = (new Date()).getTime();
            var timeDiff = time - lastTime;
            var angleChange = angularSpeed * timeDiff * 2 * Math.PI / 1000;
            cube.rotation.y += angleChange;
            lastTime = time;

            // render
            renderer.render(scene, camera);

            // request new frame
            requestAnimationFrame(function(){
                animate();
            });
        }


        Polymer('sprite-canvas', {
            leinwand : null,

            ready: function() {
                console.log(this.$.c);
                console.log(this.shadowRoot.querySelector('.leinwand'));
                canvas = this.shadowRoot.querySelector('.leinwand');
                //hello();
                init();
            }
        });

        function init(){
            renderer = new THREE.WebGLRenderer();
            renderer.setSize(300,300);
            canvas.appendChild(renderer.domElement);
            camera = new THREE.PerspectiveCamera(45, 300/300, 1, 1000);
            camera.position.z = 500;
            scene = new THREE.Scene();
            cube = new THREE.Mesh(new THREE.CubeGeometry(100, 100, 100), new THREE.MeshBasicMaterial({
                color: 'red'
            }));
            cube.rotation.x = Math.PI * 0.1;
            scene.add(cube);

            // start animation
            animate();
        }

        function hello(){
            var node = document.createElement("LI");
            var textnode = document.createTextNode("Water");
            node.appendChild(textnode);
            //document.getElementById("myList").appendChild(node);


            canvas.appendChild(node);

        }
    </script>
</polymer-element>