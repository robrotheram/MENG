
<link rel="import" href="post-card.html">


<polymer-element name="story-1">

    <template>

        <style>
            :host {
                position:absolute ;
                width: 100%;
                height: 100%;
                left: 0px;
                top: 150px;
                font-family: 'RobotoDraft', sans-serif;


            }

            #container {
                position: relative;
                width:100%;
                height:100%;
                overflow: scroll;
                padding: 20px;

            }
            #spacing{
                width: 0px;
                height:50px;
            }

            .card{
                width: 200px;
                height: 200px;
                position: relative;
                background-color: #004444;
            }
        </style>

        <div id="container" flex horizontal wrap around-justified layout>



                <post-card>
                    <div id="c" class="leinwand" width="300" height="300"></div>
                </post-card>


                <post-card>
                    <div id="c1" class="leinwand" width="300" height="300"></div>
                </post-card>

               <!-- <post-card>
                    <img width="70" height="70"
                         src="images/bg9.jpg">
                    <h2>3</h2>
                    <p>I'm composing with shadow DOM!</p>
                </post-card>-->


            <div class="card" id="animate-me" vertical center center-justified layout on-tap="{{ani}}"></div>




            </div>



    </template>

    <script src="../bower_components/three-js/threejs/three.min.js"></script>
    <script>
       // var canvas;

        var angularSpeed = 0.2;
        var lastTime = 0;
        var renderer;
        var camera;
        var scene;
        var cube;

        var width= 300;
        var height = 300;

        // this function is executed on each animation frame
        function animate(){
            // update
            var time = (new Date()).getTime();
            var timeDiff = time - lastTime;
            var angleChange = angularSpeed * timeDiff * 2 * Math.PI / 1000;
            cube.rotation.y += angleChange;
            lastTime = time;

            // render
            renderer.render(scene, camera);

            // request new frame
            requestAnimationFrame(function(){
                animate();
            });
        }

        Polymer('story-1', {
            leinwand : null,

            ready: function() {

                var canvas = this.shadowRoot.querySelector('#c');
                width = canvas.getAttribute('width');
                height = canvas.getAttribute('height');
                init(this.shadowRoot.querySelector('#c'));
                init(this.shadowRoot.querySelector('#c1'));
               // init(this.shadowRoot.querySelector('#c2'));
            }
        });

        function init(canvas){
            renderer = new THREE.WebGLRenderer();
            renderer.setSize(width,height);
            canvas.appendChild(renderer.domElement);
            camera = new THREE.PerspectiveCamera(45, width/height, 1, 1000);
            camera.position.z = 500;
            scene = new THREE.Scene();
            cube = new THREE.Mesh(new THREE.CubeGeometry(100, 100, 100), new THREE.MeshBasicMaterial({
                color: 'red'
            }));
            cube.rotation.x = Math.PI * 0.1;
            scene.add(cube);

            // start animation
            animate();
        }

        function hello(){
            var node = document.createElement("LI");
            var textnode = document.createTextNode("Water");
            node.appendChild(textnode);
            //document.getElementById("myList").appendChild(node);


            canvas.appendChild(node);

        }





    </script>

</polymer-element>